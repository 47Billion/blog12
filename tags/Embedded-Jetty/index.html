<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tag: Embedded Jetty | 47Billion Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="47Billion Blog">
<meta property="og:url" content="http://47billion.com/blog/blog/tags/Embedded-Jetty/">
<meta property="og:site_name" content="47Billion Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="47Billion Blog">
<meta name="twitter:description">

  
  
    <link rel="icon" href="/favicon.png">
  
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!--<link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">-->
  <!--<link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>-->
  <link rel="stylesheet" href="/blog/css/style.css" type="text/css">

  <link rel="stylesheet" href="/blog/css/slicknav.css" type="text/css">

  
<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60258456-2', 'auto');
    ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="http://www.47billion.com/" class="logo">47Billion Blog</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
          
      </nav>


      <nav id="sub-nav">
          <div id="search-form-wrap">
              <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://47billion.com/blog"></form>
          </div>
          <a id="nav-search-btn" class="nav-icon" title="Search"></a>
          <div class="headsociallink">
              <a href="https://www.facebook.com/47Billion" target="_blank"><i class="fa fa-facebook-square"></i></a>
              <a href="https://twitter.com/47billion" target="_blank"><i class="fa fa-twitter-square"></i></a>
              <a href="https://www.linkedin.com/company/47billion" target="_blank"><i class="fa fa-linkedin-square"></i></a>
              <a href="https://plus.google.com/102587598432325227811"><i class="fa fa-google-plus-square"></i></a>
              <a href="mailto:info@47billion.com"><i class="fa fa-envelope"></i></a>
          </div>
      </nav>
    </div>
  </div>
</header>

      <nav id="mobile-nav" class="off">
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://47billion.com/blog"></form>
  </div>
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Digital-World/">Digital World</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Technology/">Technology</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Technology/Java/">Java</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/07/">July 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2013/09/">September 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2013/01/">January 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2012/03/">March 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2011/09/">September 2011</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Aspect-Oriented-Programming/">Aspect Oriented Programming</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/AspectJ/">AspectJ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Delayed-Job/">Delayed Job</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Deployable/">Deployable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Design-Pattern/">Design Pattern</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Digital-Signage/">Digital Signage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Embedded-Jetty/">Embedded Jetty</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Guice/">Guice</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/JAX-RS/">JAX-RS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Java/">Java</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Java-Annotation/">Java Annotation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Jersey/">Jersey</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Jesque/">Jesque</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Jetty/">Jetty</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Quartz/">Quartz</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/REST/">REST</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Redis/">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Resque/">Resque</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Resteasy/">Resteasy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Security/">Security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Spring/">Spring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/jsr250/">jsr250</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
</aside>
        
        <section id="main">
  
    <article id="post-jetty-executable-webserver-archetype" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2013/01/08/jetty-executable-webserver-archetype/" class="article-date">
  <time datetime="2013-01-08T08:18:49.000Z" itemprop="datePublished">Jan 8 2013</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/Technology/">Technology</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2013/01/08/jetty-executable-webserver-archetype/">Jetty Executable Webserver Archetype</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>We create and deploy many rest based API apps on our servers. Now, instead of managing multitudes of webservers on different machines, we make our deployable archives wrapped with all the necessary dependencies in order to be self-executable. Benefits?</p>
<ul>
<li>We just have to ensure that all our servers have the same Java environment, and no other dependencies.</li>
<li>No waste of time configuring, managing web (tomcat, jetty etc.) servers.</li>
<li>And, we only have to distribute a single executable.<br>Hassle free management. Won’t you agree?</li>
</ul>
<p>To cut down on bootstrapping time, we have created a <a href="http://maven.apache.org/guides/introduction/introduction-to-archetypes.html" target="_blank" rel="external">maven archetype</a> to help us quickly create and start on new API projects. Our tech stack is <a href="http://code.google.com/p/google-guice/" target="_blank" rel="external">Google Guice</a>, <a href="http://www.jboss.org/resteasy" target="_blank" rel="external">JBoss Resteasy</a>, <a href="http://logback.qos.ch/" target="_blank" rel="external">Logback</a>, and <a href="http://www.eclipse.org/jetty/" target="_blank" rel="external">Embedded Jetty</a>.</p>
<p>Github link: <a href="https://github.com/anismiles/jetty-webserver-archetype" target="_blank" rel="external">https://github.com/anismiles/jetty-webserver-archetype</a></p>
<h2 id="Install">Install</h2>
<p>You can either build/install from source</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git clone https:<span class="comment">//github.com/anismiles/jetty-webserver-archetype.git</span></div><div class="line">mvn clean install</div></pre></td></tr></table></figure>

<p>Or you can simply <a href="https://github.com/anismiles/jetty-webserver-archetype/blob/master/downloads/jetty-webserver-archetype-1.0.jar?raw=true" target="_blank" rel="external">download the jar</a> and install that.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mvn install:install-file \</div><div class="line">-Dfile=jetty-webserver-archetype-<span class="number">1.0</span>.jar \</div><div class="line">-DgroupId=com.strumsoft \</div><div class="line">-DartifactId=jetty-webserver-archetype \</div><div class="line">-Dversion=<span class="number">1.0</span> \</div><div class="line">-Dpackaging=jar \</div><div class="line">-DgeneratePom=<span class="keyword">true</span></div></pre></td></tr></table></figure>

<h2 id="Usage">Usage</h2>
<p>Let’s say you want to create a new project “<strong>hello-world</strong>” with group “<strong>com.hello.world</strong>”, you would run:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mvn archetype:generate \</div><div class="line">-DgroupId=com.hello.world \</div><div class="line">-DartifactId=hello-world \</div><div class="line">-Dversion=<span class="number">1.0</span>-SNAPSHOT \</div><div class="line">-DarchetypeGroupId=com.strumsoft \</div><div class="line">-DarchetypeVersion=<span class="number">1.0</span> \</div><div class="line">-DarchetypeArtifactId=jetty-webserver-archetype</div></pre></td></tr></table></figure>

<p>That’s it. You are ready to roll. You have set up a basic working API app. Now, you can run it in dev mode</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn clean jetty:run</div></pre></td></tr></table></figure>

<p>Or in production mode</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mvn clean <span class="keyword">package</span></div><div class="line">java –jar target/hello-world-<span class="number">1.0</span>-SNAPSHOT-dist.war start &amp;</div></pre></td></tr></table></figure>

<p>To check, open <a href="http://localhost:8085/" target="_blank" rel="external">http://localhost:8085/</a><br>To stop:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java –jar target/hello-world-<span class="number">1.0</span>-SNAPSHOT-dist.war stop</div></pre></td></tr></table></figure>

<p>Further, you can pass additional Jetty, Logback or your App’s properties</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">java \</div><div class="line">-Djetty.configurationFile=&lt;jetty-config&gt; \</div><div class="line">-Dapp.configurationFile=&lt;app.properties&gt; \</div><div class="line">-Dlogback.configurationFile=&lt;logback.xml&gt; \</div><div class="line">–jar target/hello-world-<span class="number">1.0</span>-SNAPSHOT-dist.war start &amp;</div></pre></td></tr></table></figure>

<p>They will override default properties setup by the executable.<br>Ideally you might want to create an <a href="http://www.ghacks.net/2009/04/04/get-to-know-linux-the-etcinitd-directory/" target="_blank" rel="external">init.d</a> file to start and stop you API app efficiently. Here is a prototype:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="shebang">#!/bin/sh</span></div><div class="line"></div><div class="line"><span class="comment"># Executable war file</span></div><div class="line">WAR_FILE=/var/apps/&lt;my-war-file&gt;.war</div><div class="line"></div><div class="line"><span class="comment"># Configuration files</span></div><div class="line">APP_NAME=&lt;app-name&gt;</div><div class="line"></div><div class="line">JETTY_CONFIG=/etc/<span class="variable">${APP_NAME}</span>-jetty.properties</div><div class="line">APP_CONFIG=/etc/<span class="variable">${APP_NAME}</span>-app.properties</div><div class="line">LOGBACK_CONFIG=/etc/<span class="variable">${APP_NAME}</span>-logback.properties</div><div class="line"></div><div class="line"><span class="comment"># Process</span></div><div class="line">PIDFILE=/var/run/<span class="variable">${APP_NAME}</span>.pid</div><div class="line"></div><div class="line"><span class="comment"># Java arguments</span></div><div class="line">JAVA_ARGS=&quot;-Djetty.configurationFile=<span class="variable">${JETTY_CONFIG}</span> -Dapp.configurationFile=<span class="variable">${APP_CONFIG}</span> -Dlogback.configurationFile=<span class="variable">${LOGBACK_CONFIG}</span>&quot;</div><div class="line"></div><div class="line"><span class="comment"># Command</span></div><div class="line">CMD=<span class="variable">$1</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [[ -z <span class="variable">${CMD}</span> ]]; <span class="keyword">then</span></div><div class="line">  java <span class="variable">${JAVA_ARGS}</span> -jar <span class="variable">${WAR_FILE}</span> usage</div><div class="line">  <span class="keyword">exit</span> <span class="number">1</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [[ <span class="variable">${CMD}</span> == <span class="string">'start'</span> ]]; <span class="keyword">then</span></div><div class="line">    <span class="keyword">if</span> [[ <span class="operator">-f</span> <span class="variable">${PIDFILE}</span> ]]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> &quot;Already running&quot;</div><div class="line">        <span class="keyword">exit</span> <span class="number">1</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> [[ <span class="operator">-f</span> <span class="variable">${WAR_FILE}</span> ]]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> &quot;Starting jetty: <span class="variable">${WAR_FILE}</span>&quot;</div><div class="line">        java <span class="variable">${JAVA_ARGS}</span> -jar <span class="variable">${WAR_FILE}</span> start &amp;</div><div class="line">        PID=$!</div><div class="line">        <span class="built_in">echo</span> &quot;<span class="variable">$PID</span>&quot; &gt; <span class="variable">${PIDFILE}</span></div><div class="line">        <span class="built_in">echo</span> &quot;Started <span class="variable">${APP_NAME}</span> with pid: <span class="variable">${PID}</span>&quot;</div><div class="line">    <span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">elif</span> [[ <span class="variable">${CMD}</span> == <span class="string">'stop'</span> ]]; <span class="keyword">then</span></div><div class="line">    <span class="comment"># Try gracefully first</span></div><div class="line">    java <span class="variable">${JAVA_ARGS}</span> -jar <span class="variable">${WAR_FILE}</span> stop</div><div class="line">    sleep <span class="number">10</span></div><div class="line">    <span class="keyword">if</span> [[ <span class="operator">-f</span> <span class="variable">${PIDFILE}</span> ]]; <span class="keyword">then</span></div><div class="line">        PID=`cat <span class="variable">${PIDFILE}</span>`</div><div class="line">        test -z <span class="variable">$PID</span> || kill <span class="variable">$PID</span></div><div class="line">        rm <span class="variable">${PIDFILE}</span></div><div class="line">        sleep <span class="number">1</span></div><div class="line">        <span class="built_in">echo</span> &quot;Forcibly Stopped <span class="variable">${WAR_FILE}</span> with pid: <span class="variable">${PID}</span>&quot;</div><div class="line">    <span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">else</span> <span class="comment"># Just let the other cmds through...</span></div><div class="line">    java <span class="variable">${JAVA_ARGS}</span> -jar <span class="variable">${WAR_FILE}</span> <span class="variable">${CMD}</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">exit</span> <span class="number">0</span></div></pre></td></tr></table></figure>

<p>That’s it! have fun. :)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://47billion.com/blog/2013/01/08/jetty-executable-webserver-archetype/" data-id="mp0n9zw9gnudm77k" class="article-share-link">Share</a>
      
        <a href="http://47billion.com/blog/2013/01/08/jetty-executable-webserver-archetype/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Deployable/">Deployable</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Embedded-Jetty/">Embedded Jetty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Guice/">Guice</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Jetty/">Jetty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/REST/">REST</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Resteasy/">Resteasy</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
        47Billion &copy; 2015
    </div>
  </div>
</footer>
    </div>
    
<script>
  var disqus_shortname = '47Billion';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/blog/js/jquery.min.js" type="text/javascript"></script>

<script src="/blog/js/jquery.scrollLoading.js" type="text/javascript"></script>



  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/blog/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/blog/js/script.js" type="text/javascript"></script>

<script src="/blog/js/jquery.slicknav.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function(){
        $('#sidebar').slicknav();
    });
</script>
  </div>
</body>
</html>